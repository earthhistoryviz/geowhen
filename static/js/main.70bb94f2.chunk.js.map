{"version":3,"sources":["overmind/actions.js","overmind/effects.js","overmind/index.js","overmind/state.js","components/Search.js","components/StageModal.js","App.js","index.js"],"names":["onInitializeOvermind","a","state","actions","effects","isLoading","router","initialize","stageUrlChanged","clearUrl","axios","get","headers","Accept","responseType","result","spreadsheet","xlsx","read","Uint8Array","data","type","console","log","masterdata","utils","sheet_to_json","Sheets","slice","byperiod","reduce","acc","row","Period","push","options","periods","add","Region","regions","Set","displayedStages","view","filterOptions","Array","from","colorsResult","colorsSpreadsheet","colorsMasterdata","MasterChronostrat","colorLookup","map","rgb","split","topAge","Ma","color","join","stageColors","page","stageName","doFilter","filteredPeriods","filter","Object","keys","forEach","periodName","bp","stageData","STAGE","toUpperCase","includes","queryStr","region","period","bottomAge","Base","parseFloat","TOP","sortBy","sort","b","mergeFilter","toMerge","mergeStagingFilter","filterModal","stagingFilter","applyFilters","sf","visible","resetFilters","toggleFilterModal","selectItem","selected","selectedItem","navigateTo","showStageModal","selectedStage","stage","foundstage","stages","stageindex","name","replace","routes","url","params","base","start","match","show","overmind","createOvermind","raw","useAppState","createStateHook","useActions","createActionsHook","Search","props","fm","filterState","handleCloseModal","InputGroup","className","size","FormControl","onChange","placeholder","Button","variant","onClick","Modal","onHide","Header","closeButton","Title","Body","Form","FloatingLabel","controlId","label","Select","event","target","value","index","Group","as","Row","Label","column","sm","Col","Control","Check","checked","Footer","StageModal","stageimage","imageUrl","http","XMLHttpRequest","open","send","status","imageExists","style","padding","border","borderRadius","align","boxShadow","margin","fontWeight","Rank","toFixed","Comments","overflow","src","alt","window","processGithubResponse","App","image_url","width","height","href","evt","overflowX","marginTop","length","currColor","i","backgroundColor","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.70bb94f2.chunk.js","sourcesContent":["import axios from 'axios';\r\nimport xlsx from 'xlsx';\r\n// import clone from 'clone';\r\n\r\nexport const onInitializeOvermind = async ({ state, actions, effects }) => {\r\n  state.isLoading = true;\r\n\r\n  // Init the router\r\n  effects.router.initialize({\r\n    '/stage/:stageName': actions.stageUrlChanged,\r\n    '': actions.clearUrl,\r\n  });\r\n\r\n  const result = await axios.get('https://api.github.com/repos/earthhistoryviz/geowhen/contents/data/MasterData.xlsx', {\r\n    headers: {\r\n      Accept: 'application/vnd.github.v3.raw'\r\n    },\r\n    responseType: 'arraybuffer'\r\n  });\r\n  const spreadsheet = xlsx.read(new Uint8Array(result.data), { type: 'array' });\r\n  console.log('spreadsheet = ', spreadsheet);\r\n  const masterdata = xlsx.utils.sheet_to_json(spreadsheet.Sheets['Geological stages']).slice(1);\r\n  // console.log(masterdata);\r\n\r\n  // Note from Aaron: we stopped here, we were debugging any period names that show up in\r\n  // the byperiod variable which didn't make sense (\"undefined\", \"era\", etc.).  All of them\r\n  // found thus far we errors in the spreadsheet itself, so no need for code to deal with them.\r\n  const byperiod = masterdata.reduce((acc, row) => {\r\n    if (!acc[row.Period]) acc[row.Period] = [];\r\n    acc[row.Period].push(row);\r\n    return acc;\r\n  }, {});\r\n\r\n  // Populate options for periods and regions in the filtering menu\r\n  const options = masterdata.reduce((acc, row) => {\r\n    acc.periods.add(row.Period);\r\n    if (row.Region && row.Region !== ' ') acc.regions.add(row.Region);\r\n\r\n    return acc;\r\n  }, { periods: new Set(), regions: new Set() });\r\n\r\n  console.log('byperiod = ', byperiod);\r\n  state.masterdata.byperiod = byperiod;\r\n  state.masterdata.displayedStages = byperiod;\r\n\r\n  state.view.filterOptions.periods = Array.from(options.periods);\r\n  state.view.filterOptions.regions = Array.from(options.regions);\r\n\r\n  // Populate colors\r\n  const colorsResult = await axios.get('https://api.github.com/repos/earthhistoryviz/geowhen/contents/data/default_timescale.xlsx', {\r\n    headers: {\r\n      Accept: 'application/vnd.github.v3.raw'\r\n    },\r\n    responseType: 'arraybuffer'\r\n  });\r\n  const colorsSpreadsheet = xlsx.read(new Uint8Array(colorsResult.data), { type: 'array' });\r\n  const colorsMasterdata = xlsx.utils.sheet_to_json(colorsSpreadsheet.Sheets.MasterChronostrat).slice(1);\r\n  console.log(colorsMasterdata);\r\n\r\n  // const colorLookup = colorsMasterdata.reduce((acc, row) => {\r\n  //   const rgb = row['Color (internat)'].split('/');\r\n  //   acc[row.Ma] = 'rgb(' + rgb.join(', ') + ')';\r\n  //   return acc;\r\n  // }, {});\r\n\r\n  const colorLookup = colorsMasterdata.map((row) => {\r\n    const rgb = row['Color (internat)'].split('/');\r\n    return { topAge: row.Ma, color: 'rgb(' + rgb.join(', ') + ')' };\r\n  });\r\n\r\n  console.log(colorLookup);\r\n\r\n  state.view.stageColors = colorLookup;\r\n\r\n  state.isLoading = false;\r\n\r\n  // If we already have a stageName, then the URL mapper ran before\r\n  // initialization finished loading all the stages.  Re-run it as if\r\n  // they just navigated here.\r\n  if (state.page.stageName) {\r\n    console.log('Re-calling stageUrlChanged after initialization');\r\n    actions.stageUrlChanged(state.page);\r\n  }\r\n};\r\n\r\n/****************************************************************************\r\n *\r\n * Filtering\r\n *\r\n ***************************************************************************/\r\n\r\nexport const doFilter = ({ state }) => {\r\n  const filteredPeriods = {};\r\n  const filter = state.filter;\r\n  Object.keys(state.masterdata.byperiod).forEach((periodName) => {\r\n    const bp = state.masterdata.byperiod[periodName];\r\n    filteredPeriods[periodName] = bp.filter(stageData => {\r\n      if (!stageData.STAGE.toUpperCase().includes(filter.queryStr.toUpperCase())) {\r\n        console.log('query string denies inclusion of ' + stageData.STAGE);\r\n        return false;\r\n      }\r\n      console.log('region type is: ', typeof stageData.Region);\r\n      if (filter.region && ((typeof stageData.Region !== 'string') || !stageData.Region.toUpperCase().includes(filter.region.toUpperCase()))) {\r\n        console.log('filter region denies inclusion of ' + stageData.STAGE);\r\n        return false;\r\n      }\r\n\r\n      if (filter.period && ((typeof stageData.Period !== 'string') || !stageData.Period.toUpperCase().includes(filter.period.toUpperCase()))) {\r\n        return false;\r\n      }\r\n\r\n      if (filter.topAge && filter.bottomAge && (stageData.Base < parseFloat(filter.topAge) || stageData.TOP > parseFloat(filter.bottomAge))) {\r\n        return false;\r\n      }\r\n      return true;\r\n    });\r\n\r\n    if (filter.sortBy === 'alphabet') {\r\n      filteredPeriods[periodName].sort((a, b) => {\r\n        if (a.STAGE < b.STAGE) return -1;\r\n        else if (a.STAGE > b.STAGE) return 1;\r\n        else return 0;\r\n      });\r\n    } else if (filter.sortBy === 'age') {\r\n      filteredPeriods[periodName].sort((a, b) => {\r\n        if (a.Base < b.Base) return -1;\r\n        else if (a.Base > b.Base) return 1;\r\n        else return 0;\r\n      });\r\n    } else if (filter.sortBy === 'region') {\r\n      // might need to change UI for this\r\n    }\r\n  });\r\n\r\n  state.masterdata.displayedStages = filteredPeriods;\r\n};\r\n\r\nexport const mergeFilter = ({ state, actions }, toMerge) => {\r\n  state.filter = {\r\n    ...state.filter,\r\n    ...toMerge\r\n  };\r\n\r\n  actions.doFilter();\r\n  console.log(state.filter);\r\n};\r\n\r\nexport const mergeStagingFilter = ({ state }, toMerge) => {\r\n  state.view.filterModal.stagingFilter = {\r\n    ...state.view.filterModal.stagingFilter,\r\n    ...toMerge\r\n  };\r\n};\r\n\r\nexport const applyFilters = ({ state, actions }) => {\r\n  const sf = state.view.filterModal.stagingFilter;\r\n  state.view.filterModal.visible = !state.view.filterModal.visible;\r\n  if (sf.bottomAge && !sf.topAge) {\r\n    sf.topAge = sf.bottomAge;\r\n  }\r\n  state.filter = { ...sf };\r\n  actions.doFilter();\r\n};\r\n\r\nexport const resetFilters = ({ state }) => {\r\n  state.view.filterModal.stagingFilter = {\r\n    period: false,\r\n    region: false,\r\n    topAge: false,\r\n    bottomAge: false,\r\n    sortBy: false,\r\n    queryStr: ''\r\n  };\r\n};\r\n\r\nexport const toggleFilterModal = ({ state }) => {\r\n  if (!state.view.filterModal.visible) {\r\n    state.view.filterModal.stagingFilter = { ...state.filter };\r\n  }\r\n  state.view.filterModal.visible = !state.view.filterModal.visible;\r\n};\r\n\r\nexport const selectItem = ({ state, effects }, selected) => {\r\n  if (selected === false) state.selectedItem = false;\r\n  else state.selectedItem = { ...selected };\r\n  effects.router.navigateTo('/stage/'+selected.STAGE);\r\n};\r\n\r\nexport const showStageModal = async ({ state, effects, actions }, { stageName }) => {\r\n  const byperiod = state.masterdata.byperiod;\r\n  let selectedStage = null;\r\n  Object.keys(byperiod).forEach(period => {\r\n    byperiod[period].forEach((stage) => {\r\n      if (stage.STAGE === stageName) {\r\n        console.log('Found selectedStage = ', stage);\r\n        selectedStage = stage;\r\n      }\r\n    });\r\n  });\r\n  actions.selectItem(selectedStage);\r\n};\r\n\r\n// Note: the page router sends us the stageName parameter since the route defined it\r\n// It only send us that parameter.  We know it's a /stage/* URL because this \r\n// particular action was called which was registered for the route.\r\nexport const stageUrlChanged = ({ state, actions }, { stageName }) => {\r\n  state.page.stageName = stageName ? stageName.toUpperCase() : false;\r\n  if (!state.masterdata || !state.masterdata.displayedStages) {\r\n    console.log('WARNING: trying to set page URL BEFORE displayedStages are available');\r\n    return;\r\n  }\r\n\r\n  // Find the stage that matches this\r\n  let foundstage = false;\r\n  for (const period in state.masterdata.displayedStages) {\r\n    const stages = state.masterdata.displayedStages[period];\r\n    for (const stageindex in stages) {\r\n      const stage = stages[stageindex];\r\n      const name = stage.STAGE || '';\r\n      if (name.toUpperCase().replace(/ /g,'') === stageName) {\r\n        foundstage = name;\r\n        break;\r\n      }\r\n    }\r\n    if (foundstage) break;\r\n  }\r\n\r\n  if (!foundstage) {\r\n    console.log('WARNING: stage ', stageName, ' requested, but no stage could be found for that name');\r\n    return;\r\n  }\r\n\r\n  // Is this already the selected stage?\r\n  if (state.selectedItem && state.selectedItem.STAGE === foundstage) {\r\n    console.log('Stage ', foundstage, ' is already the selected stage.');\r\n    return;\r\n  }\r\n\r\n  // Otherwise, select this stage:\r\n  actions.showStageModal({ stageName: foundstage });\r\n}\r\n\r\nexport const clearUrl = ({ state }) => {\r\n  state.page.stageName = false;\r\n}\r\n","import page from 'page';\r\n\r\nexport const router = {\r\n  // Each key in routes is a route, and the value is an action function from overmind\r\n  initialize (routes) {\r\n    console.log('Initializing router with routes: ', routes);\r\n    Object.keys(routes).forEach(url => {\r\n      page(url, ({ params }) => routes[url](params));\r\n    });\r\n    page.base('/geowhen');\r\n    page.start();\r\n  },\r\n  navigateTo: (url) => {\r\n    console.log('Navigating to: ', url);\r\n    // If the stage is undefined, just go back to home\r\n    if (url.match('undefined')) {\r\n      page.show('/');\r\n    } else {\r\n      page.show(url)\r\n    }\r\n  },\r\n};\r\n","import { createOvermind } from 'overmind';\r\nimport { createStateHook, createActionsHook } from 'overmind-react';\r\n\r\nimport { state } from './state';\r\nimport * as actions from './actions';\r\nimport * as effects from './effects';\r\n\r\nexport const overmind = createOvermind({\r\n  state,\r\n  actions,\r\n  effects\r\n});\r\n\r\nexport const useAppState = createStateHook();\r\nexport const useActions = createActionsHook();\r\n","export const state = {\r\n  isLoading: true,\r\n  selectedItem: false,\r\n  // page is filled out from the URL\r\n  page: {\r\n    stageName: false,\r\n  },\r\n  masterdata: {\r\n    byperiod: {},\r\n    displayedStages: {}, // same format as byperiod\r\n    raw: []\r\n  },\r\n  filter: {\r\n    period: false,\r\n    region: false,\r\n    topAge: false,\r\n    bottomAge: false,\r\n    sortBy: false,\r\n    queryStr: ''\r\n  },\r\n  view: {\r\n    filterModal: {\r\n      visible: false,\r\n      stagingFilter: {} // same as filter above\r\n    },\r\n    filterOptions: {\r\n      periods: [],\r\n      regions: []\r\n    },\r\n    stageColors: {}\r\n  }\r\n};\r\n","import Button from 'react-bootstrap/Button';\nimport React from 'react';\nimport { InputGroup, FormControl, Modal, FloatingLabel, Form, Row, Col } from 'react-bootstrap';\nimport { useAppState, useActions } from '../overmind';\n\nconst Search = (props) => {\n  const actions = useActions();\n  const state = useAppState();\n\n  const fm = state.view.filterModal;\n  const filterOptions = state.view.filterOptions;\n  const filterState = fm.stagingFilter;\n\n  const handleCloseModal = () => actions.toggleFilterModal();\n  const handleShowModal = () => actions.toggleFilterModal();\n  const handleSubmit = () => actions.applyFilters();\n\n  return (\n    <>\n      <InputGroup className='my-3' size='lg'>\n        <FormControl onChange={props.onChange} aria-label='Large' aria-describedby='inputGroup-sizing-sm' placeholder='Search' />\n        <Button variant='primary' onClick={handleShowModal}>\n          Filter menu\n        </Button>\n\n        <Modal size='lg' show={fm.visible} onHide={handleCloseModal}>\n          <Modal.Header closeButton>\n            <Modal.Title>Advance Filtering Menu</Modal.Title>\n          </Modal.Header>\n\n          <Modal.Body className='p-sm-5'>\n            <Form>\n              <h5>Search by:</h5>\n              <FloatingLabel className='my-2' controlId='floatingSelect' label='By Period'>\n                <Form.Select onChange={event => actions.mergeStagingFilter({ period: event.target.value })} aria-label='Floating label select example'>\n                  <option value='' selected={!filterState.period}>All</option>\n                  {filterOptions.periods.map((period, index) => (\n                    <option key={index} value={period} selected={period === filterState.period}>{period}</option>\n                  ))}\n                </Form.Select>\n              </FloatingLabel>\n\n              <FloatingLabel className='my-2' controlId='floatingSelect' label='By Region'>\n                <Form.Select onChange={event => actions.mergeStagingFilter({ region: event.target.value })} aria-label='Floating label select example'>\n                  <option value='' selected={!filterState.region}>All</option>\n                  {filterOptions.regions.map((region, index) => (\n                    <option key={index} value={region} selected={region === filterState.region}>{region}</option>\n                  ))}\n                </Form.Select>\n              </FloatingLabel>\n\n              <Form.Group as={Row} className='mb-3'>\n                <Form.Label column sm='2'>\n                  By Age:\n                </Form.Label>\n                <Col sm='4'>\n                  <Form.Control\n                    type='number'\n                    placeholder='Lower Bound'\n                    onChange={event => { actions.mergeStagingFilter({ bottomAge: event.target.value }); }}\n                    value={filterState.bottomAge}\n                  />\n                </Col>\n                <Col className='d-flex justify-content-center' sm='2'>\n                  <p className='m-auto'>to</p>\n                </Col>\n                <Col sm='4'>\n                  <Form.Control\n                    type='number'\n                    placeholder='Upper Bound'\n                    onChange={event => { actions.mergeStagingFilter({ topAge: event.target.value }); }}\n                    value={filterState.topAge}\n                  />\n                </Col>\n              </Form.Group>\n\n              <hr />\n              <h5>Sort by:</h5>\n\n              <Form.Group\n                className='mb-3'\n                onChange={event => { actions.mergeStagingFilter({ sortBy: event.target.value }); }}\n              >\n                <Form.Check\n                  type='radio'\n                  name='sortBy'\n                  label='sort-alphabetically'\n                  value='alphabet'\n                  checked={filterState.sortBy === 'alphabet'}\n                />\n                <Form.Check\n                  type='radio'\n                  name='sortBy'\n                  label='sort-by-age'\n                  value='age'\n                  checked={filterState.sortBy === 'age'}\n                />\n                <Form.Check\n                  type='radio'\n                  name='sortBy'\n                  label='sort-by-region (coming soon)'\n                  value='region'\n                  checked={filterState.sortBy === 'region'}\n                />\n              </Form.Group>\n              <hr />\n              <h5>Group by:</h5>\n            </Form>\n          </Modal.Body>\n\n          <Modal.Footer>\n            <Button variant='secondary' onClick={handleCloseModal}>\n              Close\n            </Button>\n            <Button variant='danger' onClick={actions.resetFilters}>\n              Reset\n            </Button>\n            <Button variant='primary' onClick={handleSubmit}>\n              Apply\n            </Button>\n          </Modal.Footer>\n        </Modal>\n      </InputGroup>\n      <p />\n    </>\n  );\n};\n\nexport default Search;\n","import React from 'react';\r\nimport { Modal, Button } from 'react-bootstrap';\r\n\r\nimport { useAppState, useActions } from '../overmind';\r\n\r\nconst imageExists = (imageUrl) => {\r\n  const http = new XMLHttpRequest();\r\n  http.open('HEAD', imageUrl, false);\r\n  http.send();\r\n  return http.status !== 404;\r\n};\r\n\r\nconst StageModal = () => {\r\n  const state = useAppState();\r\n  const actions = useActions();\r\n\r\n  const handleCloseModal = () => { actions.selectItem(false); };\r\n\r\n  let stageimage = false;\r\n  if (state.selectedItem) {\r\n    stageimage = `/geowhen/stage-charts/${state.selectedItem.Period.toUpperCase()}_regional.jpg`;\r\n    if (!imageExists(stageimage)) {\r\n      stageimage = false;\r\n    }\r\n  }\r\n\r\n  console.log(state.selectedItem);\r\n\r\n  return (\r\n    <Modal show={state.selectedItem !== false} onHide={handleCloseModal} size='xl' style={{ padding: '0px' }}>\r\n      <Modal.Header closeButton>\r\n        <Modal.Title>Stage Information - {state.selectedItem.STAGE}</Modal.Title>\r\n      </Modal.Header>\r\n\r\n      <Modal.Body className='p-sm-5'>\r\n        {\r\n          !state.selectedItem\r\n            ? ''\r\n            : <div className='border shadow-sm mb-4 pb-4 pt-2' style={{ border: '20px solid ', borderRadius: '10px' }}>\r\n              <div className='w-100' align='center'>\r\n                <div style={{ border: '1px solid #DDDDDD', borderRadius: '3px', boxShadow: '3px 3px #CCCCC', margin: '5px 5px 5px 5px' }}>\r\n                  <div>\r\n                    <h3>{state.selectedItem.STAGE}</h3>\r\n                  </div>\r\n                  <div style={{ fontWeight: 'normal' }}>\r\n                    (Period: {state.selectedItem.Period})\r\n                  </div>\r\n                </div>\r\n                {!state.selectedItem.Rank ? '' : \r\n                  <div style={{ border: '1px solid #DDDDDD', borderRadius: '3px', boxShadow: '3px 3px #CCCCC', margin: '5px 5px 5px 5px' }}>\r\n                    <div style={{ fontWeight: 'bold' }}>\r\n                      Rank:\r\n                    </div>\r\n                    <div>\r\n                      {state.selectedItem.Rank}\r\n                    </div>\r\n                  </div>\r\n                }\r\n                <div style={{ border: '1px solid #DDDDDD', borderRadius: '3px', boxShadow: '3px 3px #CCCCC', margin: '5px 5px 5px 5px' }}>\r\n                  <div style={{ fontWeight: 'bold' }}>\r\n                    Region:\r\n                  </div>\r\n                  <div>\r\n                    {state.selectedItem.Region}\r\n                  </div>\r\n                </div>\r\n                <div style={{ border: '1px solid #DDDDDD', borderRadius: '3px', boxShadow: '3px 3px #CCCCC', margin: '5px 5px 5px 5px' }}>\r\n                  <div style={{ fontWeight: 'bold' }}>\r\n                    Top Age:\r\n                  </div>\r\n                  <div>\r\n                    {+(state.selectedItem.TOP).toFixed(3)}\r\n                  </div>\r\n                </div>\r\n                <div style={{ border: '1px solid #DDDDDD', borderRadius: '3px', boxShadow: '3px 3px #CCCCC', margin: '5px 5px 5px 5px' }}>\r\n                  <div style={{ fontWeight: 'bold' }}>\r\n                    Base Age:\r\n                  </div>\r\n                  <div>\r\n                    {+(state.selectedItem.Base).toFixed(3)}\r\n                  </div>\r\n                </div>\r\n                {!state.selectedItem.Comments ? '' : \r\n                  <div style={{ border: '1px solid #DDDDDD', borderRadius: '3px', boxShadow: '3px 3px #CCCCC', margin: '5px 5px 5px 5px' }}>\r\n                    <div style={{ fontWeight: 'bold' }}>\r\n                      Comments:\r\n                    </div>\r\n                    <div>\r\n                      {state.selectedItem.Comments}\r\n                    </div>\r\n                  </div>\r\n                }\r\n                <div style={{ border: '1px solid #DDDDDD', borderRadius: '3px', boxShadow: '3px 3px #CCCCC', margin: '5px 5px 5px 5px' }}>\r\n                  <div style={{ fontWeight: 'bold' }}>\r\n                    Top Calibration:\r\n                  </div>\r\n                  <div>\r\n                    {state.selectedItem['Top calibration']}\r\n                  </div>\r\n                </div>\r\n                <div style={{ border: '1px solid #DDDDDD', borderRadius: '3px', boxShadow: '3px 3px #CCCCC', margin: '5px 5px 5px 5px' }}>\r\n                  <div style={{ fontWeight: 'bold' }}>\r\n                    Base Calibration:\r\n                  </div>\r\n                  <div>\r\n                    {state.selectedItem['Base calibration']}\r\n                  </div>\r\n                </div>\r\n\r\n              </div>\r\n              <div className='d-flex justify-content-center' style={{ overflow: 'scroll' }}>\r\n                {stageimage ? <img className='m-auto' src={stageimage} alt='Stage Chart' /> : ''}\r\n              </div>\r\n            </div>\r\n        }\r\n      </Modal.Body>\r\n\r\n      <Modal.Footer>\r\n        <Button variant='secondary' onClick={handleCloseModal}>\r\n          Close\r\n        </Button>\r\n      </Modal.Footer>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default StageModal;\r\n","import 'bootstrap/dist/css/bootstrap.min.css';\r\n\r\nimport Button from 'react-bootstrap/Button';\r\nimport Search from './components/Search';\r\nimport StageModal from './components/StageModal';\r\nimport { useAppState, useActions } from './overmind';\r\n\r\nif (!window.processGithubResponse) {\r\n  window.processGithubResponse = (data) => {\r\n    console.log('Callback was called w/ data: ', data);\r\n  };\r\n}\r\n\r\nfunction imageExists(image_url) {\r\n  const http = new XMLHttpRequest();\r\n  http.open('HEAD', image_url, false);\r\n  http.send();\r\n  return http.status !== 404;\r\n}\r\n\r\nfunction App() {\r\n  const state = useAppState();\r\n  const actions = useActions();\r\n\r\n  const stageColors = state.view.stageColors;\r\n\r\n  // const result = masterdata.displayedStages(\"Quaternary\");\r\n  const { isLoading, masterdata } = state;\r\n\r\n  const searchUpdated = (evt) => {\r\n    actions.mergeFilter({ queryStr: evt.target.value });\r\n  };\r\n\r\n  let stageimage = false;\r\n  if (state.selectedItem) {\r\n    stageimage = `/geowhen/stage-charts/${state.selectedItem.Period.toUpperCase()}_regional.jpg`;\r\n    if (!imageExists(stageimage)) {\r\n      stageimage = false;\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className='mx-auto mt-4' style={{ width: '90%' }}>\r\n      <div className='mx-auto mt-4'>{/* style={{width: '100%', minHeight: '30px', display: 'flex', flexDirection: 'row' }}> */}\r\n        <div>\r\n          <img src='/geowhen/geowhen_logo.png' height='75px' alt='GeoWhen Logo' />\r\n        </div>\r\n        <div>\r\n          Lookup table for regional stages provided by<br />\r\n          <a href='https://ccgm.org/en/'>Commission for the Geological Map of the World (UNESCO)</a>\r\n        </div>\r\n      </div>\r\n      {/* Will show \"loading...\" when the stages data is not loaded */}\r\n      {!isLoading\r\n        ? (\r\n          <>\r\n            <Search onChange={searchUpdated} />\r\n            <div>\r\n              <b>Click</b> on a stage below for details, <b>Search</b> by portion of name, or <b>Filter</b> by region or geologic or numerical age.<br />\r\n              Scroll down for more stages, scroll right for more periods.\r\n            </div>\r\n            <div\r\n              className='mt-5 border shadow-sm'\r\n              style={{ height: '400px', overflowX: 'scroll', marginTop: '5px !important' }}\r\n            >\r\n              <div className='scrolling-wrapper row flex-row flex-nowrap mt-4 pb-4 pt-2'>\r\n\r\n                {Object.keys(masterdata.displayedStages).map((periodName, index) => {\r\n                  if (masterdata.displayedStages[periodName] && masterdata.displayedStages[periodName].length < 1) {\r\n                    return '';\r\n                  }\r\n\r\n                  return (\r\n                    <div className='col' align='center' style={{ border: '1px solid #DDDDDD', borderRadius: '3px', boxShadow: '3px 3px #CCCCC', margin: '5px 5px 5px 5px' }} key={index}>\r\n                      <strong>{periodName}</strong>\r\n                      {masterdata.displayedStages[periodName].map((stage, index) => {\r\n                        let currColor = stageColors[0].color;\r\n\r\n                        for (let i = 0; i < stageColors.length; i++) {\r\n                          if (stage.Base > stageColors[i].topAge) {\r\n                            currColor = stageColors[i + 1].color;\r\n                          } else {\r\n                            break;\r\n                          }\r\n                        }\r\n\r\n                        return (\r\n                          <div key={index} className='my-2 col-8 d-flex justify-content-center'>\r\n\r\n                            <Button style={{ backgroundColor: currColor, color: 'black' }} onClick={() => { actions.selectItem(stage); }}>\r\n                              {stage.STAGE}\r\n                            </Button>\r\n                          </div>\r\n                        );\r\n                      })}\r\n                    </div>\r\n                  );\r\n                })}\r\n\r\n              </div>\r\n\r\n            </div>\r\n\r\n            {/* Main content */}\r\n            <StageModal />\r\n            {/* {!state.selectedItem ? ''\r\n              : <div className='mt-5 border shadow-sm row flex-nowrap mt-4 pb-4 pt-2' style={{ border: '20px solid ', borderRadius: '10px' }}>\r\n                <div style={{ width: '500px' }} align='center'>\r\n                  <div style={{ width: '480px', border: '1px solid #DDDDDD', borderRadius: '3px', boxShadow: '3px 3px #CCCCC', margin: '5px 5px 5px 5px' }}>\r\n                    <div style={{ fontSize: '34px' }}>\r\n                      {state.selectedItem.STAGE}\r\n                    </div>\r\n                    <div style={{ fontWeight: 'normal' }}>\r\n                      (Period: {state.selectedItem.Period})\r\n                    </div>\r\n                  </div>\r\n                  <div style={{ width: '480px', border: '1px solid #DDDDDD', borderRadius: '3px', boxShadow: '3px 3px #CCCCC', margin: '5px 5px 5px 5px' }}>\r\n                    <div style={{ fontWeight: '' }}>\r\n                      Region:\r\n                    </div>\r\n                    <div>\r\n                      {state.selectedItem.Region}\r\n                    </div>\r\n                  </div>\r\n                  <div style={{ width: '480px', border: '1px solid #DDDDDD', borderRadius: '3px', boxShadow: '3px 3px #CCCCC', margin: '5px 5px 5px 5px' }}>\r\n                    <div style={{ fontWeight: 'bold' }}>\r\n                      Top Age:\r\n                    </div>\r\n                    <div>\r\n                      {+(state.selectedItem.TOP).toFixed(3)}\r\n                    </div>\r\n                  </div>\r\n                  <div style={{ width: '480px', border: '1px solid #DDDDDD', borderRadius: '3px', boxShadow: '3px 3px #CCCCC', margin: '5px 5px 5px 5px' }}>\r\n                    <div style={{ fontWeight: 'bold' }}>\r\n                      Base Age:\r\n                    </div>\r\n                    <div>\r\n                      {+(state.selectedItem.Base).toFixed(3)}\r\n                    </div>\r\n                  </div>\r\n                  <div style={{ width: '480px', border: '1px solid #DDDDDD', borderRadius: '3px', boxShadow: '3px 3px #CCCCC', margin: '5px 5px 5px 5px' }}>\r\n                    <div style={{ fontWeight: 'bold' }}>\r\n                      Top Calibration:\r\n                    </div>\r\n                    <div>\r\n                      {state.selectedItem['Top calibration']}\r\n                    </div>\r\n                  </div>\r\n                  <div style={{ width: '480px', border: '1px solid #DDDDDD', borderRadius: '3px', boxShadow: '3px 3px #CCCCC', margin: '5px 5px 5px 5px' }}>\r\n                    <div style={{ fontWeight: 'bold' }}>\r\n                      Base Calibration:\r\n                    </div>\r\n                    <div>\r\n                      {state.selectedItem['Base calibration']}\r\n                    </div>\r\n                  </div>\r\n\r\n                </div>\r\n                <div>\r\n                  {stageimage ? <img src={stageimage} /> : ''}\r\n                </div>\r\n              </div>} */}\r\n\r\n          </>\r\n        )\r\n        : <p>Loading...</p>}\r\n      <div align='center' style={{ width: '100%', border: '1px solid #DDDDDD', borderRadius: '3px', boxShadow: '3px 3px #CCCCC', margin: '5px 5px 5px 5px' }}>\r\n        Created by Aaron Ault, James Ogg, Ibrahim Saeed, Aarini Panzade, Will Oberley\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'overmind-react';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nimport { overmind } from './overmind';\r\n\r\nif (process.env.NODE_ENV !== 'development') {\r\n  console.log = function () { };\r\n}\r\n\r\nReactDOM.render(\r\n  <Provider value={overmind}>\r\n    <React.StrictMode>\r\n      <App />\r\n    </React.StrictMode>\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}
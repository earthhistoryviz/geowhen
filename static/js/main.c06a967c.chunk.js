(this.webpackJsonpgeowhen=this.webpackJsonpgeowhen||[]).push([[0],{102:function(e,t,r){"use strict";r.r(t);var i={};r.r(i),r.d(i,"onInitializeOvermind",(function(){return F})),r.d(i,"doFilter",(function(){return A})),r.d(i,"mergeFilter",(function(){return M})),r.d(i,"mergeStagingFilter",(function(){return k})),r.d(i,"applyFilters",(function(){return B})),r.d(i,"toggleFilterModal",(function(){return N}));var n=r(0),a=r.n(n),o=r(20),s=r.n(o),l=r(31),c=(r(73),r(74),r(25)),d=r(108),g=r(57),p=r(106),j=r(107),u=r(63),b=r(105),h=r(62),f=r(21),m=r(2),x=r(28),O=r.n(x),y=r(55),v=r(56),w=r.n(v),S=r(42),C=r.n(S),F=function(){var e=Object(y.a)(O.a.mark((function e(t){var r,i,n,a,o,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=t.state).isLoading=!0,e.next=4,w.a.get("https://api.github.com/repos/earthhistoryviz/geowhen/contents/data/MasterData.xlsx",{headers:{Accept:"application/vnd.github.v3.raw"},responseType:"arraybuffer"});case 4:i=e.sent,n=C.a.read(new Uint8Array(i.data),{type:"array"}),console.log("spreadsheet = ",n),a=C.a.utils.sheet_to_json(n.Sheets["Geological stages"]).slice(1),o=a.reduce((function(e,t){return e[t.Period]||(e[t.Period]=[]),e[t.Period].push(t),e}),{}),s=a.reduce((function(e,t){return e.periods.add(t.Period),t.Region&&" "!==t.Region&&e.regions.add(t.Region),e}),{periods:new Set,regions:new Set}),console.log("byperiod = ",o),r.masterdata.byperiod=o,r.masterdata.displayedStages=o,r.view.filterOptions.periods=Array.from(s.periods),r.view.filterOptions.regions=Array.from(s.regions),r.isLoading=!1;case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(e){var t=e.state,r={},i=t.filter;Object.keys(t.masterdata.byperiod).forEach((function(e){var n=t.masterdata.byperiod[e];r[e]=n.filter((function(e){return e.STAGE.toUpperCase().includes(i.queryStr.toUpperCase())?(console.log("region type is: ",typeof e.Region),!i.region||"string"===typeof e.Region&&e.Region.toUpperCase().includes(i.region.toUpperCase())?!(i.period&&("string"!==typeof e.Period||!e.Period.toUpperCase().includes(i.period.toUpperCase()))):(console.log("filter region denies inclusion of "+e.STAGE),!1)):(console.log("query string denies inclusion of "+e.STAGE),!1)}))})),t.masterdata.displayedStages=r},M=function(e,t){var r=e.state,i=e.actions;r.filter=Object(m.a)(Object(m.a)({},r.filter),t),i.doFilter()},k=function(e,t){var r=e.state;e.actions;r.view.filterModal.stagingFilter=Object(m.a)(Object(m.a)({},r.view.filterModal.stagingFilter),t)},B=function(e){var t=e.state,r=e.actions;t.view.filterModal.visible=!t.view.filterModal.visible,t.filter=Object(m.a)({},t.view.filterModal.stagingFilter),r.doFilter()},N=function(e){var t=e.state;t.view.filterModal.visible||(t.view.filterModal.stagingFilter=Object(m.a)({},t.filter)),t.view.filterModal.visible=!t.view.filterModal.visible},G=Object(f.d)({state:{isLoading:!0,masterdata:{byperiod:{},displayedStages:{},raw:[]},filter:{period:!1,region:!1,topAge:!1,bottomAge:!1,sortBy:!1,queryStr:""},view:{filterModal:{visible:!1,stagingFilter:{}},filterOptions:{periods:[],regions:[]}}},actions:i}),R=Object(l.c)(),L=Object(l.b)(),U=r(1),D=function(e){var t=L(),r=R(),i=r.view.filterModal,n=r.view.filterOptions,a=i.stagingFilter,o=function(){return t.toggleFilterModal()};return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsxs)(d.a,{className:"my-3",size:"lg",children:[Object(U.jsx)(g.a,{onChange:e.onChange,"aria-label":"Large","aria-describedby":"inputGroup-sizing-sm",placeholder:"Search"}),Object(U.jsx)(c.a,{variant:"primary",onClick:function(){return t.toggleFilterModal()},children:"Filter menu"}),Object(U.jsxs)(p.a,{size:"lg",show:i.visible,onHide:o,children:[Object(U.jsx)(p.a.Header,{closeButton:!0,children:Object(U.jsx)(p.a.Title,{children:"Advance Filtering Menu"})}),Object(U.jsx)(p.a.Body,{className:"p-sm-5",children:Object(U.jsxs)(j.a,{children:[Object(U.jsx)("h5",{children:"Search by:"}),Object(U.jsx)(u.a,{className:"my-2",controlId:"floatingSelect",label:"By Period",children:Object(U.jsxs)(j.a.Select,{onChange:function(e){return t.mergeStagingFilter({period:e.target.value})},"aria-label":"Floating label select example",children:[Object(U.jsx)("option",{value:"",selected:!a.period,children:"All"}),n.periods.map((function(e,t){return Object(U.jsx)("option",{value:e,selected:e===a.period,children:e},t)}))]})}),Object(U.jsx)(u.a,{className:"my-2",controlId:"floatingSelect",label:"By Region",children:Object(U.jsxs)(j.a.Select,{onChange:function(e){return t.mergeStagingFilter({region:e.target.value})},"aria-label":"Floating label select example",children:[Object(U.jsx)("option",{value:"",selected:!a.region,children:"All"}),n.regions.map((function(e,t){return Object(U.jsx)("option",{value:e,selected:e===a.region,children:e},t)}))]})}),Object(U.jsxs)(j.a.Group,{as:b.a,className:"mb-3",children:[Object(U.jsx)(j.a.Label,{column:!0,sm:"2",children:"By Age:"}),Object(U.jsx)(h.a,{sm:"4",children:Object(U.jsx)(j.a.Control,{type:"number",placeholder:"Lower Bound",onChange:function(e){t.mergeStagingFilter({bottomAge:e.target.value})}})}),Object(U.jsx)(h.a,{className:"d-flex justify-content-center",sm:"2",children:Object(U.jsx)("p",{className:"m-auto",children:"to"})}),Object(U.jsx)(h.a,{sm:"4",children:Object(U.jsx)(j.a.Control,{type:"number",placeholder:"Upper Bound",onChange:function(e){t.mergeStagingFilter({topAge:e.target.value})}})})]}),Object(U.jsx)("hr",{}),Object(U.jsx)("h5",{children:"Sort by:"}),Object(U.jsxs)(j.a.Group,{className:"mb-3",onChange:function(e){t.mergeStagingFilter({sortBy:e.target.value})},children:[Object(U.jsx)(j.a.Check,{type:"radio",name:"sortBy",label:"sort-alphabetically",value:"alphabet"}),Object(U.jsx)(j.a.Check,{type:"radio",name:"sortBy",label:"sort-by-age",value:"age"}),Object(U.jsx)(j.a.Check,{type:"radio",name:"sortBy",label:"sort-by-region",value:"region"})]}),Object(U.jsx)("hr",{}),Object(U.jsx)("h5",{children:"Group by:"})]})}),Object(U.jsxs)(p.a.Footer,{children:[Object(U.jsx)(c.a,{variant:"secondary",onClick:o,children:"Close"}),Object(U.jsx)(c.a,{variant:"danger",onClick:o,children:"Reset"}),Object(U.jsx)(c.a,{variant:"primary",onClick:function(){return t.applyFilters()},children:"Apply"})]})]})]}),Object(U.jsx)("p",{})]})};window.processGithubResponse||(window.processGithubResponse=function(e){console.log("Callback was called w/ data: ",e)});var P=function(){var e=R(),t=L(),r=e.isLoading,i=e.masterdata;return Object(U.jsx)("div",{className:"mx-auto mt-4",style:{width:"90%"},children:r?Object(U.jsx)("p",{children:"Loading..."}):Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(D,{onChange:function(e){t.mergeFilter({queryStr:e.target.value})}}),Object(U.jsx)("div",{className:"mt-5 border shadow-sm",style:{height:"400px",overflowX:"scroll"},children:Object(U.jsx)("div",{className:"scrolling-wrapper row flex-row flex-nowrap mt-4 pb-4 pt-2",children:Object.keys(i.displayedStages).map((function(e,t){return i.displayedStages[e]&&i.displayedStages[e].length<1?"":Object(U.jsxs)("div",{className:"col",align:"center",style:{border:"1px solid #DDDDDD",borderRadius:"3px",boxShadow:"3px 3px #CCCCC",margin:"5px 5px 5px 5px"},children:[Object(U.jsx)("strong",{children:e}),i.displayedStages[e].map((function(e,t){return Object(U.jsx)("div",{className:"my-2 col-8 d-flex justify-content-center",children:Object(U.jsx)(c.a,{children:e.STAGE})},t)}))]},t)}))})})]})})};s.a.render(Object(U.jsx)(l.a,{value:G,children:Object(U.jsx)(a.a.StrictMode,{children:Object(U.jsx)(P,{})})}),document.getElementById("root"))},52:function(e,t){},73:function(e,t,r){},97:function(e,t){},98:function(e,t){}},[[102,1,2]]]);
//# sourceMappingURL=main.c06a967c.chunk.js.map